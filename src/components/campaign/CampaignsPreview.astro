---
import type { Tables } from '@config/supabase.types.ts';
import CampaignPreviewBig from '@components/campaign/CampaignPreviewBig.astro';
import CampaignPreviewSmall from '@components/campaign/CampaignPreviewSmall.astro';
import H2 from '@components/base/H2.astro';
import Section from '@components/base/Section.astro';
import CTALink from '@components/links/CTALink.astro';

interface Props {
  campaigns: Tables<'campaigns'>[];
}

const { campaigns } = Astro.props;

const firstCampaign: Tables<'campaigns'> = campaigns.splice(3).splice(0, 1)[0];
---

<Section>
  <H2>Current campaigns</H2>
  <div class='flex gap-8 mt-8'>
    <CampaignPreviewBig campaign={firstCampaign} />
    <div class='flex-1 flex flex-col justify-between border-s ps-8'>
      <div class='flex flex-col gap-3'>
        {campaigns.map((campaign) => <CampaignPreviewSmall {campaign} />)}
      </div>
      <div class='self-center my-auto'>
        <CTALink
          label='Discover all campaigns'
          href='/campaign'
          icon='CarbonArrowRight'
          rounded
        />
      </div>
    </div>
  </div>
</Section>
